
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Регулярные выражения - fightmaster's blog</title>
  <meta name="author" content="fightmaster">

  
  <meta name="description" content="Регулярные выражения Feb 26th, 2013 Краткое содержание лекции Теоретические задания |
Практические задания Whenever faced with a problem, some &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://fightmaster.github.com/php-lectures/06-regular-expressions.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="fightmaster's blog" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-38362255-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">fightmaster's blog</a></h1>
  
    <h2>Скромный персональный блог</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:fightmaster.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
    <li><a href="/">Блог</a></li>
    <li><a href="/php-lectures/00-contents.html">Лекции по PHP</a></li>
    <li><a href="/blog/archives">Архив</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article role="article">
  
  <header>
    <h1 class="entry-title">Регулярные выражения</h1>
    <p class="meta">








  


<time datetime="2013-02-26T04:00:00+04:00" pubdate data-updated="true">Feb 26<span>th</span>, 2013</time></p>
  </header>
  
  <h3>Краткое содержание лекции</h3>

<p><a href="06-regular-expressions-theoretical-tasks.html">Теоретические задания</a> |
<a href="06-regular-expressions-practical-tasks.html">Практические задания</a></p>

<blockquote><p>Whenever faced with a problem, some people say `Lets use AWK.&#8217; Now, they have two problems.</p><footer><strong>[D. Tilbrook</strong> <cite>1988]</cite></footer></blockquote>




<blockquote><p>Some people, when confronted with a problem, think <br/>“I know, I&#8217;ll use regular expressions.” Now they have two problems.</p><footer><strong>[Jamie Zawinski</strong> <cite>12.08.1997]</cite></footer></blockquote>


<h4>Разделители</h4>

<p>Разделителем может быть любой символ не являющийся буквой, цифрой, обратной косой чертой или каким-либо пробельным символом.</p>

<p>Часто используемыми разделителями являются косые черты (/), знаки решетки (#) и тильды (~).</p>

<p>Не рекомендуется использовать метасимволы</p>

<h4>Спецсимволы</h4>

<p> <code>[ ] \ / ^ $ . | ? * + ( ) { }</code></p>

<h4>Представление символов</h4>

<ul>
<li><code>\t</code> Табуляция</li>
<li><code>\v</code> Вертикальная табуляция</li>
<li><code>\r</code> Возврат каретки</li>
<li><code>\n</code> Перевод строки</li>
<li><code>\f</code> Конец страницы</li>
<li><code>\e</code> Escape-символ</li>
<li><code>\b</code> backspace Должен находиться внутри квадратных скобок (иначе интерпретируется как граница слова).</li>
</ul>


<h4>Символьные классы</h4>

<ul>
<li><code>\d</code> === <code>[0-9]</code> Цифра</li>
<li><code>\D</code> === <code>[^\d]</code> Любой символ, кроме цифры</li>
<li><code>\w</code> === <code>[A-Za-zА-Яа-я0-9_]</code> Символы, образующие «слово» (буквы, цифры и символ подчёркивания)</li>
<li><code>\W</code> === <code>[^\w]</code> Символы, не образующие «слово»</li>
<li><code>\s</code> === <code>[ \t\v\r\n\f]</code> Пробельный символ</li>
<li><code>\S</code> === <code>[^\s]</code> Не пробельный символ</li>
</ul>


<h4>Символьные классы POSIX</h4>

<ul>
<li><code>[:upper:]</code> === <code>[A-Z]</code>   Символы верхнего регистра</li>
<li><code>[:lower:]</code> === <code>[a-z]</code>   Символы нижнего регистра</li>
<li><code>[:alpha:]</code> === <code>[[:upper:][:lower:]]</code> Буквы</li>
<li><code>[:digit:]</code> === <code>[0-9]</code>, т. е. \d Цифры</li>
<li><code>[:xdigit:]</code> === <code>[[:digit:]A-Fa-f]</code> Шестнадцатеричные цифры</li>
<li><code>[:alnum:]</code> === <code>[[:alpha:][:digit:]]</code>    Буквы и цифры</li>
<li><code>[:word:]</code>    &#8220;`[[:alnum:]_]&#8220;&#8220;&#8220;, т. е. \w  Символы, образующие «слово»</li>
<li><code>[:punct:]</code>   <code>[-!"#$%&amp;'()*+,./:;&lt;=&gt;?@[\\\]_`{|}~]</code> Знаки пунктуации</li>
<li><code>[:blank:]</code>   <code>[ \t]</code>   Пробел и табуляция</li>
<li><code>[:space:]</code>   <code>[[:blank:]\v\r\n\f]</code>, т. е. \s   Пробельные символы</li>
<li><code>[:cntrl:]</code>   <code>[\x00-\x1F\x7F]</code> Управляющие символы</li>
<li><code>[:graph:]</code>   <code>[\x21-\x7E]</code> Печатные символы</li>
<li><code>[:print:]</code>   <code>[\x20-\x7E]</code>, т. е. [[:graph:] ] Печатные символы с пробелом</li>
</ul>


<h4>Метасимволы</h4>

<ul>
<li>Вне <code>[]</code>

<ul>
<li><code>\</code> - общий экранирующий символ, допускающий несколько вариантов применения</li>
<li><code>^</code> - декларирует начало данных (или строки в многострочном режиме)</li>
<li><code>$</code> - декларирует конец данных или до завершения строки (или окончание строки в многострочном режиме)</li>
<li><code>.</code> - соответствует любому символу, кроме перевода строки (по умолчанию)</li>
<li><code>[]</code> - начало описания символьного класса / конец описания символьного класса</li>
<li><code>()</code> - начало подмаски / конец подмаски</li>
<li><code>|</code> - начало ветки условного выбора</li>
<li><code>?</code> - расширяет смысл метасимвола (, является также квантификатором, означающим отсутствие либо ровно 1 вхождение, также преобразует жадные квантификаторы в ленивые (смотрите повторение)</li>
<li><code>*</code> - квантификатор, означающий 0 или более вхождений</li>
<li><code>+</code> - квантификатор, означающий 1 или более вхождений</li>
<li><code>{}</code> - начало количественного квантификатора / конец количественного квантификатора</li>
</ul>
</li>
<li><p>Внутри <code>[]</code></p>

<ul>
<li><code>\</code> - общий экранирующий символ</li>
<li><code>^</code> - означает отрицание класса, допустим только в начале класса</li>
<li><code>-</code> - означает символьный интервал</li>
<li><code>]</code> = завершает символьный класс</li>
</ul>
</li>
<li><p><code>^</code> Начало строки <code>^a</code>  <strong>a</strong>aa aaa</p></li>
<li><code>$</code> Конец строки  <code>a$</code>  aaa aa<strong>a</strong></li>
<li><code>\b</code> Граница слова <code>a\b</code>  aa<strong>a</strong> aa<strong>a</strong></li>
<li><code>\ba</code> <strong>a</strong>aa <strong>a</strong>aa</li>
<li><code>\B</code> Не граница слова  <code>\Ba\B</code> a<strong>a</strong>a a<strong>a</strong>a</li>
<li><code>\G</code> Предыдущий успешный поиск   <code>\Ga</code> <strong><em>aaa</em></strong> aaa (поиск остановился на 4-й позиции — там, где не нашлось a)</li>
<li><code>[\dABCDEF]</code></li>
</ul>


<h4>Квантификаторы</h4>

<p>Квантификаторы могу стоять за:</p>

<ul>
<li>произвольным, возможно экранированным, символом</li>
<li>метасимволом &#8220;точка&#8221;</li>
<li>символьным классом</li>
<li>ссылкой на предыдущий фрагмент шаблона (см. следующий раздел)</li>
<li><p>взятой в круглый скобки подмаской (если это не утверждение - см. далее)</p></li>
<li><p><code>{n}</code> Ровно n раз <code>colou{3}r</code> соответствует <code>colouuur</code></p></li>
<li><code>{m,n}</code> От m до n включительно <code>colou{2,4}r</code> соответствует <code>colouur, colouuur, colouuuur</code></li>
<li><code>{m,}</code> Не менее m  <code>colou{2,}r</code> соответствует <code>colouur, colouuur, colouuuur и т. д.</code></li>
<li><code>{,n}</code> Не более n  <code>colou{,3}r</code> соответствует <code>color, colour, colouur, colouuur</code></li>
<li><code>*</code> Ноль или более  {0,}  <code>colou*r</code> соответствует <code>color, colour и т. д.</code></li>
<li><code>+</code> Одно или более  {1,}  <code>olou+r</code> соответствует <code>colour, colouur и т. д. (но не color)</code></li>
<li><p><code>?</code> Ноль или одно   {0,1}  <code>colou?r</code> соответствует <code>color, colour</code></p></li>
<li><p>Жадность <code>?</code> после квантификатора</p></li>
<li>Захватывание <code>+</code> после квантификатора</li>
</ul>


<h4>Подмаски</h4>

<ul>
<li><code>cat(aract|erpillar|)</code></li>
<li><code>the ((red|white) (king|queen))</code></li>
<li><code>the ((?:red|white) (king|queen))</code></li>
<li><code>(?i:saturday|sunday)</code> === <code>(?:(?i)saturday|sunday)</code></li>
<li><code>(?:(Sat)ur|(Sun))day</code> vs <code>(?|(Sat)ur|(Sun))day</code></li>
<li><code>((?i)rah)\s+\1</code></li>
<li><code>(?P&lt;name&gt;pattern)</code> === <code>(?&lt;name&gt;pattern)</code> === <code>(?'name'pattern)</code></li>
</ul>


<p> Обращение к подмаскам <code>(?P=name)</code>, <code>\k&lt;name&gt;</code>, <code>k'name'</code>, <code>\1</code>, <code>\g1</code>, <code>\g{1}</code></p>

<p> Однократные подмаски &#8220;`(?>\d+)bar</p>

<h4>Просмотр вперед / назад</h4>

<ul>
<li><code>(?=шаблон)</code> Позитивный просмотр вперёд  <code>Людовик(?=XVI)</code>  ЛюдовикXV, <strong>Людовик</strong>XVI, <strong>Людовик</strong>XVIII, ЛюдовикLXVII, ЛюдовикXXL</li>
<li><code>(?!шаблон)</code>  Негативный просмотр вперёд (с отрицанием)   <code>Людовик(?!XVI)</code>  <strong>Людовик</strong>XV, ЛюдовикXVI, ЛюдовикXVIII, <strong>Людовик</strong>LXVII, <strong>Людовик</strong>XXL</li>
<li><code>(?&lt;=шаблон)</code> Позитивный просмотр назад   <code>(?&lt;=Сергей )Иванов</code>  Сергей <strong>Иванов</strong>, Игорь Иванов</li>
<li><code>(?&lt;!шаблон)</code> Негативный просмотр назад (с отрицанием)    <code>(?&lt;!Сергей )Иванов</code>  Сергей Иванов, Игорь <strong>Иванов</strong></li>
</ul>


<h4>Поиск по условию</h4>

<ul>
<li><code>(?(?=если)то|иначе)</code> Если операция просмотра успешна, то далее выполняется часть то, иначе выполняется часть иначе. В выражении может использоваться любая из четырёх операций просмотра. Следует учитывать, что операция просмотра нулевой ширины, поэтому части то в случае позитивного или иначе в случае негативного просмотра должны включать в себя описание шаблона из операции просмотра. <code>(?(?&lt;=а)м|п)</code>    <strong>м</strong>ам,<strong>п</strong>ап</li>
<li><code>(?(n)то|иначе)</code>  Если n-я группа вернула значение, то поиск по условию выполняется по шаблону то, иначе по шаблону иначе. <code>(а)?(?(1)м|п)</code>  м<strong>ам</strong>,<strong>п</strong>а<strong>п</strong></li>
</ul>


<h4>Рекурсия</h4>

<h4>Модификаторы</h4>

<p>Модификаторы действуют с момента вхождения и до конца регулярного выражения или противоположного модификатора. Некоторые интерпретаторы могут применить модификатор ко всему выражению, а не с момента его вхождения.</p>

<ul>
<li>i (PCRE_CASELESS) - нечувствительность выражения к регистру символов (англ. case insensitivity)</li>
<li>m (PCRE_MULTILINE) - Символы ^ и $ вызывают соответствие только (после и до символов новой строки|с началом и концом строки)</li>
<li>s (PCRE_DOTALL) - режим соответствия точки символам переноса строки и возврата каретки</li>
<li>x (PCRE_EXTENDED) - режим без учёта пробелов между частями регулярного выражения и позволяет использовать # для комментариев</li>
</ul>


<p> <code>(?i-sm)</code>
 <code>А(?#тут комментарий)Б</code></p>

<h5>Самостоятельно</h5>

<ul>
<li>e (PREG_REPLACE_EVAL)</li>
<li>A (PCRE_ANCHORED)</li>
<li>D (PCRE_DOLLAR_ENDONLY)</li>
<li>S</li>
<li>U (PCRE_UNGREEDY)</li>
<li>X (PCRE_EXTRA)</li>
<li>J (PCRE_INFO_JCHANGED)</li>
<li>u (PCRE_UTF8)</li>
</ul>


<h4>Функции для работы в php</h4>

<ul>
<li><code>string preg_quote ( string $str [, string $delimiter = null ] )</code></li>
<li><code>array preg_grep ( string $pattern , array $input [, int $flags = 0 ] )</code></li>
<li><code>mixed preg_filter ( mixed $pattern , mixed $replacement , mixed $subject [, int $limit = -1 [, int &amp;$count ]] )</code></li>
<li><code>mixed preg_replace ( mixed $pattern , mixed $replacement , mixed $subject [, int $limit = -1 [, int &amp;$count ]] )</code></li>
<li><code>array preg_split ( string $pattern , string $subject [, int $limit = -1 [, int $flags = 0 ]] )</code></li>
<li><code>int preg_match ( string $pattern , string $subject [, array &amp;$matches [, int $flags = 0 [, int $offset = 0 ]]] )</code></li>
<li><code>int preg_match_all ( string $pattern , string $subject [, array &amp;$matches [, int $flags = PREG_PATTERN_ORDER [, int $offset = 0 ]]] )</code></li>
<li><code>int preg_last_error ( void )</code></li>
</ul>


<h4>Полезные ссылки</h4>

<ul>
<li><a href="http://www.pcre.ru/eval/">Конструктор регулярных выражений</a></li>
<li><a href="http://on-line-teaching.com/php/regexp.htm">Регулярные выражения</a></li>
<li><a href="http://ru.wikipedia.org/wiki/%D0%A0%D0%B5%D0%B3%D1%83%D0%BB%D1%8F%D1%80%D0%BD%D1%8B%D0%B5_%D0%B2%D1%8B%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F">Регулярные выражения (Wiki)</a></li>
</ul>


  
    <footer>
      <p class="meta">
        
        








  


<time datetime="2013-02-26T04:00:00+04:00" pubdate data-updated="true">Feb 26<span>th</span>, 2013</time>
        
      </p>
      
        <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://fightmaster.github.com/php-lectures/06-regular-expressions.html" data-via="old_fightmaster" data-counturl="http://fightmaster.github.com/php-lectures/06-regular-expressions.html" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
    
    
    <div class="rdbWrapper" data-show-read="1" data-show-send-to-kindle="1" data-show-print="1" data-show-email="0" data-orientation="0" data-version="1"></div><script type="text/javascript">(function() {var s = document.getElementsByTagName("script")[0],rdb = document.createElement("script"); rdb.type = "text/javascript"; rdb.async = true; rdb.src = document.location.protocol + "//www.readability.com/embed.js"; s.parentNode.insertBefore(rdb, s); })();</script>
    
</div>

      
    </footer>
  
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Список лекций</h1>
  <ul id="php_lectures">
    
      
    
      
    
      
          <li class="post">
            <a href="/php-lectures/05-working-with-strings.html">Работа со строками</a>
          </li>
      
    
      
    
      
    
      
    
      
          <li class="post">
            <a href="/php-lectures/00-contents.html">Содержание</a>
          </li>
      
    
      
    
      
          <li class="post">
            <a href="/php-lectures/06-regular-expressions.html">Регулярные выражения</a>
          </li>
      
    
      
    
      
    
      
    
      
    
      
          <li class="post">
            <a href="/php-lectures/04-working-with-arrays.html">Работа с массивами</a>
          </li>
      
    
      
          <li class="post">
            <a href="/php-lectures/02-php-basics.html">Основы PHP</a>
          </li>
      
    
      
    
      
          <li class="post">
            <a href="/php-lectures/07-working-with-filesystem.html">Работа с файловой системой</a>
          </li>
      
    
      
    
      
          <li class="post">
            <a href="/php-lectures/03-control-structures.html">Управляющие структуры</a>
          </li>
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  </ul>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - fightmaster -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
